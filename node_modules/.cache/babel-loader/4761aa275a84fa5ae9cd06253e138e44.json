{"remainingRequest":"/workspace/rolavelz/node_modules/babel-loader/lib/index.js!/workspace/rolavelz/node_modules/eslint-loader/index.js??ref--14-0!/workspace/rolavelz/src/authUtils.js","dependencies":[{"path":"/workspace/rolavelz/src/authUtils.js","mtime":1654557752000},{"path":"/workspace/rolavelz/babel.config.js","mtime":1653923529000},{"path":"/workspace/rolavelz/node_modules/cache-loader/dist/cjs.js","mtime":1654787577000},{"path":"/workspace/rolavelz/node_modules/babel-loader/lib/index.js","mtime":1654787577000},{"path":"/workspace/rolavelz/node_modules/eslint-loader/index.js","mtime":1654787581000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvd29ya3NwYWNlL3JvbGF2ZWx6L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL3dvcmtzcGFjZS9yb2xhdmVsei9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi93b3Jrc3BhY2Uvcm9sYXZlbHovbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlL2NvbXBhdC9hcHAnOyAvLyBBZGQgdGhlIEZpcmViYXNlIHByb2R1Y3RzIHRoYXQgeW91IHdhbnQgdG8gdXNlCgppbXBvcnQgImZpcmViYXNlL2NvbXBhdC9hdXRoIjsKaW1wb3J0ICJmaXJlYmFzZS9jb21wYXQvZmlyZXN0b3JlIjsKCnZhciBGaXJlYmFzZUF1dGhCYWNrZW5kID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBGaXJlYmFzZUF1dGhCYWNrZW5kKGZpcmViYXNlQ29uZmlnKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaXJlYmFzZUF1dGhCYWNrZW5kKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInJlZ2lzdGVyVXNlciIsIGZ1bmN0aW9uICh1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgICAgZmlyZWJhc2UuYXV0aCgpLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudXBkYXRlUHJvZmlsZSh7CiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB1c2VybmFtZQogICAgICAgICAgfSk7CiAgICAgICAgICByZXNvbHZlKHVzZXIpOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KF90aGlzLl9oYW5kbGVFcnJvcihlcnJvcikpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibG9naW5Vc2VyIiwgZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXI7CiAgICAgICAgICByZXNvbHZlKHVzZXIpOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KF90aGlzLl9oYW5kbGVFcnJvcihlcnJvcikpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZm9yZ2V0UGFzc3dvcmQiLCBmdW5jdGlvbiAoZW1haWwpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChlbWFpbCwgewogICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgd2luZG93LmxvY2F0aW9uLmhvc3QgKyAiL2xvZ2luIgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChfdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxvZ291dCIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChfdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNldExvZ2dlZWRJblVzZXIiLCBmdW5jdGlvbiAodXNlcikgewogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhdXRoVXNlciIsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0QXV0aGVudGljYXRlZFVzZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYXV0aFVzZXInKSkgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2F1dGhVc2VyJykpOwogICAgfSk7CgogICAgaWYgKGZpcmViYXNlQ29uZmlnKSB7CiAgICAgIC8vIEluaXRpYWxpemUgRmlyZWJhc2UKICAgICAgZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7CiAgICAgIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICBpZiAodXNlcikgewogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYXV0aFVzZXIiLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2F1dGhVc2VyJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9CiAgLyoqCiAgICogUmVnaXN0ZXJzIHRoZSB1c2VyIHdpdGggZ2l2ZW4gZGV0YWlscwogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKEZpcmViYXNlQXV0aEJhY2tlbmQsIFt7CiAgICBrZXk6ICJfaGFuZGxlRXJyb3IiLAogICAgdmFsdWU6CiAgICAvKioKICAgICAqIEhhbmRsZSB0aGUgZXJyb3IKICAgICAqIEBwYXJhbSB7Kn0gZXJyb3IgCiAgICAgKi8KICAgIGZ1bmN0aW9uIF9oYW5kbGVFcnJvcihlcnJvcikgewogICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTsKICAgICAgcmV0dXJuIGVycm9yTWVzc2FnZTsKICAgIH0KICB9XSk7CgogIHJldHVybiBGaXJlYmFzZUF1dGhCYWNrZW5kOwp9KCk7Cgp2YXIgX2ZpcmVCYXNlQmFja2VuZCA9IG51bGw7Ci8qKgogKiBJbml0aWxpemUgdGhlIGJhY2tlbmQKICogQHBhcmFtIHsqfSBjb25maWcgCiAqLwoKdmFyIGluaXRGaXJlYmFzZUJhY2tlbmQgPSBmdW5jdGlvbiBpbml0RmlyZWJhc2VCYWNrZW5kKGNvbmZpZykgewogIGlmICghX2ZpcmVCYXNlQmFja2VuZCkgewogICAgX2ZpcmVCYXNlQmFja2VuZCA9IG5ldyBGaXJlYmFzZUF1dGhCYWNrZW5kKGNvbmZpZyk7CiAgfQoKICByZXR1cm4gX2ZpcmVCYXNlQmFja2VuZDsKfTsKLyoqCiAqIFJldHVybnMgdGhlIGZpcmViYXNlIGJhY2tlbmQKICovCgoKdmFyIGdldEZpcmViYXNlQmFja2VuZCA9IGZ1bmN0aW9uIGdldEZpcmViYXNlQmFja2VuZCgpIHsKICByZXR1cm4gX2ZpcmVCYXNlQmFja2VuZDsKfTsKCmV4cG9ydCB7IGluaXRGaXJlYmFzZUJhY2tlbmQsIGdldEZpcmViYXNlQmFja2VuZCB9Ow=="},{"version":3,"sources":["/workspace/rolavelz/src/authUtils.js"],"names":["firebase","FirebaseAuthBackend","firebaseConfig","username","email","password","Promise","resolve","reject","auth","createUserWithEmailAndPassword","then","res","user","currentUser","updateProfile","displayName","error","_handleError","signInWithEmailAndPassword","sendPasswordResetEmail","url","window","location","protocol","host","catch","signOut","sessionStorage","setItem","JSON","stringify","getItem","parse","initializeApp","onAuthStateChanged","removeItem","errorMessage","message","_fireBaseBackend","initFirebaseBackend","config","getFirebaseBackend"],"mappings":"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","sourcesContent":["import firebase from 'firebase/compat/app';\n// Add the Firebase products that you want to use\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/firestore\";\n\nclass FirebaseAuthBackend {\n    constructor(firebaseConfig) {\n        if (firebaseConfig) {\n            // Initialize Firebase\n            firebase.initializeApp(firebaseConfig);\n            firebase.auth().onAuthStateChanged((user) => {\n                if (user) {\n                    sessionStorage.setItem(\"authUser\", JSON.stringify(user));\n                } else {\n                    sessionStorage.removeItem('authUser');\n                }\n            });\n        }\n    }\n\n    /**\n     * Registers the user with given details\n     */\n    registerUser = (username, email, password) => {\n        return new Promise((resolve, reject) => {\n            // eslint-disable-next-line no-unused-vars\n            firebase.auth().createUserWithEmailAndPassword(email, password).then((res) => {\n                let user = firebase.auth().currentUser.updateProfile({\n                     displayName: username\n                   });\n                resolve(user);\n            }, (error) => {\n                reject(this._handleError(error));\n            });\n        });\n    }\n\n    /**\n     * Login user with given details\n     */\n    loginUser = (email, password) => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().signInWithEmailAndPassword(email, password).then(() => {\n                var user = firebase.auth().currentUser;\n                resolve(user);\n            }, (error) => {\n                reject(this._handleError(error));\n            });\n        });\n    }\n\n    /**\n     * forget Password user with given details\n     */\n    forgetPassword = (email) => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().sendPasswordResetEmail(email, { url: window.location.protocol + \"//\" + window.location.host + \"/login\" }).then(() => {\n                resolve(true);\n            }).catch((error) => {\n                reject(this._handleError(error));\n            })\n        });\n    }\n\n    /**\n     * Logout the user\n     */\n    logout = () => {\n        return new Promise((resolve, reject) => {\n            firebase.auth().signOut().then(() => {\n                resolve(true);\n            }).catch((error) => {\n                reject(this._handleError(error));\n            })\n        });\n    }\n\n    setLoggeedInUser = (user) => {\n        sessionStorage.setItem(\"authUser\", JSON.stringify(user));\n    }\n\n    /**\n     * Returns the authenticated user\n     */\n    getAuthenticatedUser = () => {\n        if (!sessionStorage.getItem('authUser'))\n            return null;\n        return JSON.parse(sessionStorage.getItem('authUser'));\n    }\n\n    /**\n     * Handle the error\n     * @param {*} error \n     */\n    _handleError(error) {\n        var errorMessage = error.message;\n        return errorMessage;\n    }\n}\n\nlet _fireBaseBackend = null;\n\n/**\n * Initilize the backend\n * @param {*} config \n */\nconst initFirebaseBackend = (config) => {\n    if (!_fireBaseBackend) {\n        _fireBaseBackend = new FirebaseAuthBackend(config);\n    }\n    return _fireBaseBackend;\n}\n\n/**\n * Returns the firebase backend\n */\nconst getFirebaseBackend = () => {\n    return _fireBaseBackend;\n}\n\nexport { initFirebaseBackend, getFirebaseBackend };"]}]}